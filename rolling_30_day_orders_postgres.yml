dataContractSpecification: 1.2.0
id: rolling-30-day-orders
info:
  title: Rolling 30 Day Orders
  version: 1.0.0
  description: Orders aggregated over a rolling 30-day window.
  owner: Analytics Team
  status: active
  contact:
    name: Yury
    url: https://teams.example.com/analytics

servers:
  local-postgres:
    type: postgres
    environment: dev
    host: localhost
    port: 5432
    database: dbt
    schema: ddi
    user: dbt
    password: dbt
    format: table
    description: Local Postgres DB

models:
  rolling_30_day_orders:
    description: Aggregated orders over the last 30 days with customer details.
    type: table
    fields:
      order_id:
        type: text
        description: Unique identifier for the order
        required: true
        unique: true
        primaryKey: true
      customer_id:
        type: text
        description: Customer unique identifier
        required: true
      order_date:
        type: date
        description: Date when the order was placed
        required: true
      order_amount:
        type: double
        description: Total order amount in CHF
        required: true
        quality:
          - type: sql
            description: Orders must have positive amounts
            query: |
              SELECT COUNT(*) FROM rolling_30_day_orders WHERE order_amount <= 0
            threshold: 0
      status:
        type: text
        description: Current status of the order
        required: true
        examples: ["placed", "shipped", "completed", "returned"]
